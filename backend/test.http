# --- REST Client: api.http ---
@hostname = localhost:40000
@jwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNzYxNjYxMTUyLCJleHAiOjE3NjE2NjQ3NTJ9.YDLCjBM_n_ENUHi-DHQYJFQJepb3MwY9eTke59pRWEY

# --- 1. LOGIN (POST) ---
# Dê um nome para a requisição de login para referenciar a resposta.
@name = login
POST http://{{hostname}}/api/auth/login
Content-Type: application/json

{
    "username": "admin",
    "password": "admin"
}

###

# --- 2. GET ALL CLIENTES (PROTEGIDO - COM TOKEN) ---
# Use o token capturado.
GET http://{{hostname}}/api/clientes
Content-Type: application/json
Authorization: Bearer {{jwtToken}}

###

# --- 3. GET CLIENTE BY ID (PROTEGIDO - COM TOKEN) ---
GET http://{{hostname}}/api/clientes/1
Content-Type: application/json
Authorization: Bearer {{jwtToken}}

###

# --- 4. INSERT CLIENTE (PROTEGIDO - COM TOKEN) ---
POST http://{{hostname}}/api/clientes
Content-Type: application/json
Authorization: Bearer {{jwtToken}}

{
    "nome": "Novo Cliente Teste",
    "cnpj": "99.888.777/0001-66",
    "dataCadastro": "2024-05-20",
    "limiteCredito": 7500.00
}

###

# --- 5. UPDATE CLIENTE (PROTEGIDO - COM TOKEN) ---
# Substitua {id} pelo ID do cliente a ser atualizado.
PUT http://{{hostname}}/api/clientes/1
Content-Type: application/json
Authorization: Bearer {{jwtToken}}

{
    "nome": "Cliente de Exemplo Atualizado",
    "cnpj": "11.222.333/0001-44",
    "dataCadastro": "2024-05-20",
    "limiteCredito": 10000.00
}

###

# --- 6. DELETE CLIENTE (SOFT DELETE - PROTEGIDO - COM TOKEN) ---
# Substitua {id} pelo ID do cliente a ser marcado como removido.
DELETE http://{{hostname}}/api/clientes/2
Content-Type: application/json
Authorization: Bearer {{jwtToken}}

###